<section>
  <div class="singleTripView" style="background-color: {{trip.color}}; height: 100vh;">
  <!-- Add icons here -->
    <div class="row tripDetails">
      <div class="col-xs-offset-3 col-xs-2">
        <img src="{{trip.imgUrl}}" class="tripImg">
      </div>
      <div class="col-xs-3">
        <h4> {{trip.name}} </h4>
      </div>
      <div class="col-xs-offset-2 col-xs-2">
        <span class="glyphicon glyphicon-pencil editTrip" ng-click="openEditTripModal()"></span>
        <span class="deleteTrip" ng-click="openDeleteModal()"> Delete Trip <span class="glyphicon glyphicon-remove-circle"></span></span>
      </div>
      <div class="col-xs-12">
        <p class="tripDescription"> {{trip.description}} </p>
      </div>
    </div>
    <div class="col-xs-4">
      <button class="btn btn-default tripAdvice" ng-click="openTempModal()"> Average Weather </button>
    </div>
    <div class="col-xs-4">
      <button class="btn btn-default  tripAdvice" ng-click="openPackingModal()"> Suggested Packing List </button>
    </div>
    <div class="col-xs-4">
      <button class="btn btn-default  tripAdvice" ng-click="openWarningsModal()"> Before You Go </button>
    </div>
<div class="row">
  <div ng-repeat="day in trip.days">
    <div class="clearfix" ng-if="$index % 3 == 0"></div>
      <div class="col-xs-4">
        <div class="dayCard">
          <div class="dayInfo">
            <h3> {{day.day}} </h3>
            <p>{{day.date}}</p>
          </div>
            <ul dnd-list="trails">
              <!-- The dnd-draggable directive makes an element draggable and will transfer the object that was assigned to it. If an element was dragged away, you have to remove it from the original list yourself using the dnd-moved attribute -->
              <li ng-repeat="trail in trails track by $index",
                  ng-if="trail.dayId == day.id"
                  dnd-draggable="trail"
                  dnd-moved="trails.splice($index, 1)"
                  dnd-effect-allowed="move"
                  dnd-selected="trails.selected = trail"
                  ng-class="{'selected': selected === trail}"
                  class="activityCard"
                  ng-mouseenter="optionsTrail=true" ng-mouseleave="optionsTrail=false"
                  >
              <span ng-show="trail.wishlist" class="trailInfo">
                  <h3> {{trail.name}}</h3>
                  <p> <strong> Distance: </strong> {{trail.distance}} </p>
                  <p> <strong> Est. Time: </strong> {{trail.estTime}} </p>
                  <p> <strong> Elevation Gain: </strong> {{trail.elevationGain}} </p>
                  <label for="trailNotes" class="trailNote"> Notes: </label>
                  <textarea type="text" id="trailNotes" class="activityInput" ng-model="trail.notes" value="{{trail.notes}}" ng-keypress="updateTrailNote($event, trail.id, trail.notes); blurInput($event)"></textarea>
                  <span class="glyphicon glyphicon-trash deleteTrailIcon" ng-show="optionsTrail" ng-click="deleteTrailFromTrip(trail.id)"></span>
                </span>
              </li>
            </ul>
            <ul dnd-list="notes">
            <li ng-repeat="note in notes track by $index",
                  ng-if="note.day == day.id"
                  dnd-draggable="note"
                  dnd-moved="notes.splice($index, 1)"
                  dnd-effect-allowed="move"
                  dnd-selected="notes.selected = note"
                  ng-class="{'selected': selected === note}"
                  class="activityCard"
                  ng-mouseenter="optionsNote=true" ng-mouseleave="optionsNote=false"
                  >
                <textarea type="text" ng-model="note.text" class="activityInput" value="{{note.text}}" ng-keypress="updateNote($event, note.id, note.text); blurInput($event)" focus-me="focusInput">
                </textarea>
                <span class="glyphicon glyphicon-trash deleteNoteIcon" ng-show="optionsNote" ng-click="deleteNoteFromTrip(note.id)"></span>
              </li>
            </ul>
        </div>
        <div class="addActivity" ng-click="addNote(day.id); focusInput=true"> Add Note or Activity...
        </div>
      </div>
    </div>
    <div class="clearfix" ng-if="($index+1) % 3 == 0"></div>
  </div>
</div>
</section>